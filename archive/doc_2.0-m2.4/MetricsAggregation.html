<!-- HTML header for doxygen 1.8.5-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>Jagger: Metric raw data aggregation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="my_customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Jagger
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<link href="tab-panel.css" rel="stylesheet" type="text/css">
  <script language="type="text/javascript"JavaScript" type="text/javascript" src="tab-panel.js">
  </script></head>
</head>
<body onload="bodyOnLoad()" onresize="raisePanel(currentMenuIndex)">
<!-- Generated by Doxygen 1.8.4 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('MetricsAggregation.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Metric raw data aggregation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><dl class="section user"><dt>General info</dt><dd>During test execution raw values for every metric are stores in the file system in the time series format. After the test is over, raw data is aggregated. Depending on the setup for every metric, framework can aggregate only summary value or, additionally, detailed results (metric vs time). You can setup how metric will be aggregated during metric creation. Every metric can be aggregated by single aggregator or multiple aggregators, running one after another. As example, from the raw data of the Success rate metric, with use of two different aggregators we are calculating two parameters: Success rate and Number of fails. <br/>
 <br/>
 Aggregators are processing raw data to get final measurement results that will be saved to database. <br/>
 Aggregators are executed after all measurements are finished. Main goal for them is to reduce number of data values available after measurement <br/>
 <br/>
 Simplest example: after measurement there are 100000 points, but you want to save only 200 points to database <br/>
 So you are applying averaging aggregator that takes average value for every 500 points from raw data and saves it to the DB as single value. <br/>
</dd></dl>
<dl class="section user"><dt>Java doc for aggregators and examples</dt><dd><a class="el" href="group__Main__Aggregators__group.html">Aggregators implementations and examples</a></dd></dl>
<dl class="section user"><dt>Example of custom metric with aggregator</dt><dd>Example of the custom metric with multiple aggregators. Raw data, collected for this metric, will be aggregated by different aggregators to store different values to the results DB: min, max, average values and percentiles.  <div class="fragment"><div class="line">        <span class="comment">//begin: following section is used for docu generation - example of the metric with multiple aggregators</span></div>
<div class="line">        getMetricService().createMetric(<span class="keyword">new</span> MetricDescription(metricName)</div>
<div class="line">                .displayName(<span class="stringliteral">&quot;Example duration metric, ms&quot;</span>)</div>
<div class="line">                .showSummary(<span class="keyword">true</span>)</div>
<div class="line">                .plotData(<span class="keyword">true</span>)</div>
<div class="line">                .addAggregator(<span class="keyword">new</span> MinMetricAggregatorProvider())</div>
<div class="line">                .addAggregator(<span class="keyword">new</span> MaxMetricAggregatorProvider())</div>
<div class="line">                .addAggregator(<span class="keyword">new</span> AvgMetricAggregatorProvider())</div>
<div class="line">                .addAggregator(<span class="keyword">new</span> PercentileAggregatorProvider(40D))</div>
<div class="line">                .addAggregator(<span class="keyword">new</span> PercentileAggregatorProvider(50D))</div>
<div class="line">                .addAggregator(<span class="keyword">new</span> PercentileAggregatorProvider(60D))</div>
<div class="line">                .addAggregator(<span class="keyword">new</span> PercentileAggregatorProvider(70D))</div>
<div class="line">                .addAggregator(<span class="keyword">new</span> PercentileAggregatorProvider(80D))</div>
<div class="line">                .addAggregator(<span class="keyword">new</span> PercentileAggregatorProvider(90D))</div>
<div class="line">                .addAggregator(<span class="keyword">new</span> PercentileAggregatorProvider(95D))</div>
<div class="line">                .addAggregator(<span class="keyword">new</span> PercentileAggregatorProvider(99D))</div>
<div class="line">        );</div>
<div class="line">        <span class="comment">//end: following section is used for docu generation - example of the metric with multiple aggregators</span></div>
</div><!-- fragment --></dd></dl>
<dl class="section user"><dt>Aggregation interval</dt><dd>Aggregation interval defines how many values will be saved to the database and displayed in the plots. <br/>
 In the <a class="el" href="JaggerProperties.html">framework configuration</a>, you can set either number of points on the plot or directly aggregation interval. <br/>
  <div class="fragment"><div class="line"><span class="preprocessor"># begin: following section is used for docu generation - Aggregation interval</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor"># # # Number of points displayed in plots # # #</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor"># Properties will influence aggregation interval of measured parameters</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor"># You can define exact interval between points,</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#   or you can define count of points and interval will be calculated</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor"># It is also possible to set interval or point count for every measured parameter separatly</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor"># See Aggregators documentation for more info</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">chassis.engine.e1.reporting.task.type=count</div>
<div class="line"><span class="preprocessor"># chassis.engine.e1.reporting.task.type=interval</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor"># Exact interval between plot points in milliseconds</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">chassis.engine.e1.reporting.task.point.interval=5000</div>
<div class="line"></div>
<div class="line"><span class="preprocessor"># Count of points</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">chassis.engine.e1.reporting.task.point.count=100</div>
<div class="line"></div>
<div class="line"><span class="preprocessor"># end: following section is used for docu generation - Aggregation interval</span></div>
</div><!-- fragment --> <br/>
 In the picture below you can see comparison of both settings:<br/>
 for session 26 - point count was set to 100 <br/>
 for session 29 - aggregation interval 50 sec was set <br/>
 <div class="image">
<img src="jagger_point_count_vs_time_interval.png" alt="jagger_point_count_vs_time_interval.png"/>
<div class="caption">
Aggregation interval setup</div></div>
 </dd></dl>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="MetricsMain.html">Collecting metrics</a></li>
    <li class="footer">Generated on Wed Jan 11 2017 16:22:08 for Jagger by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.4 </li>
  </ul>
</div>
</body>
</html>
